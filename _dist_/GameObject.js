import{Sprite as c,Texture as n}from"../_snowpack/pkg/pixijs.js";import{Vector as l}from"./Vector.js";export class GameObject extends c{constructor(i){super(i!=null?i:n.from("assets/ohno.png"));this.vel=new l(0,0),this.friction=.5,this.type="gameobject"}static isGameObject(i){return i.type==="gameobject"}update(i){Math.abs(this.vel.x)<.1&&(this.vel.x=0),Math.abs(this.vel.y)<.1&&(this.vel.y=0),this.x+=this.vel.x*i,this.y+=this.vel.y*i}collide(...i){i.forEach(s=>{if(s!=this&&this.checkCollision(s)){const t=this.differenceVector(s),h=new l(this.vel.x!=0?Math.abs(t.x/this.vel.x):0,this.vel.y!=0?Math.abs(t.y/this.vel.y):0),e=Math.min(h.x,h.y);this.vel.x!=0&&this.vel.y==0?this.vel.x*=e:this.vel.x==0&&this.vel.y!=0?this.vel.y*=e:e==h.x?(this.vel.x=0,this.vel.y*=this.friction):(this.vel.x*=this.friction,this.vel.y=0)}})}checkCollision(i){const s=this.x+this.vel.x,t=this.y+this.vel.y;return s<i.x+i.width&&s+this.width>i.x&&t<i.y+i.height&&t+this.height>i.y}differenceVector(i){const s=new l(0,0);return this.x<i.x?s.x=i.x-(this.x+this.width):this.x>i.x&&(s.x=this.x-(i.x+i.width)),this.y<i.y?s.y=i.y-(this.y+this.height):this.y>i.y&&(s.y=this.y-(i.y+i.height)),s}}
